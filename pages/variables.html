<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Psych Engine - Lua Variables</title>
		<link rel="stylesheet" href="../css/main.css">
		<link rel="stylesheet" href="../css/header.css">
		<link rel="stylesheet" href="../css/search.css">
		<link rel="stylesheet" href="../css/theme.css">
		<link rel="icon" href="../assets/icon.ico" type="image/x-icon">
	</head>

	<body>
		<!-- Create Search Bar and Theme Boxes-->
		<div class="sidebar"></div>
		<div class="themeBox" onclick="switchTheme()">
			<div class="themeDot"></div>
			<div class="themeDot" style="margin-left: 70px"></div>
			<button class="themeBtn" id="themeSelector"></button>
		</div>

		<!-- Load JavaScript-->
		<script src="../js/selector.js"></script>
		<script>createSidebarContent();</script>
		<script src="../js/searchbar.js"></script>
		<script src="../js/theme.js"></script>

		<!-- Header -->
		<div class="headerbox">
			<div class="header">
				<a href="../index.html">
					<img width="64" src="../assets/icon.ico" alt="Psych Engine Logo" draggable="false">
					<div class="headertext">Psych Engine - Lua Script API</div>
				</a>
			</div>
		</div>

		<!-- Page Info -->
		<div class="infobox">
			<h1>变量</h1>
			<hr>
			<p>这些变量都可以在 Lua 中直接访问，而不需要使用 <a href="reflection.html#getProperty">"getProperty"</a>,但是更改它们不会对其他脚本或游戏本身产生直接影响。</p>
			<p>因为各个版本的变量可能不互通，所以我会特别注明。</p>
			<hr>
			<h3>Lua 脚本变量</h3>
			<li class="variableitem"><span class="methodexample">luaDebugMode</span> - 切换为显示错误， 默认为false。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">luaDeprecatedWarnings</span> - 显示错误函数应该替换成的新函数， 但是 <span class="methodexample">luaDebugMode</span> 必须为true。 默认为true。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>
			<br>

			<li class="variableitem"><span class="methodexample">scriptName</span> - 正在运行的 Lua 脚本所在的路径。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">modFolder</span> - Lua脚本正在运行的Mod文件路径。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">currentModDirectory</span> - 正在游玩自定义周的 Mod 文件夹，原版游戏周为空。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<h3>Psych Engine信息变量</h3>
			<li class="variableitem"><span class="methodexample">version</span> - Psych Engine的版本号。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">buildTarget</span> - Psych的运行环境，可以是: "windows", "windows_x86" 或 "linux"。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<h3>函数返回变量</h3>
			<li class="variableitem"><span class="methodexample">Function_StopLua</span> - 仅在下一个 Lua 脚本中停止调用该函数。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">Function_StopHScript</span> - 仅在下一个 HScripts 中停止调用该函数。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">Function_StopAll</span> - 停止在下一个 Lua 脚本和 HScript 中调用该函数。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">Function_Stop</span> - 取消比如startCountdown或endSong之类的功能，主要用于过场动画。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">Function_Continue</span> - 一旦脚本运行，就像平常一样继续。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<h3>flixel.FlxG 变量</h3>
			<li class="variableitem"><span class="methodexample">screenWidth</span> - <a href="https://api.haxeflixel.com/flixel/FlxG.html#width">FlxG.width</a>，屏幕宽度。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">screenHeight</span> - <a href="https://api.haxeflixel.com/flixel/FlxG.html#height">FlxG.height</a>，屏幕高度。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<h3>歌曲变量</h3>
			<li class="variableitem"><span class="methodexample">songName</span> - 当前歌曲名字。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">songPath</span> - <b>songName</b>的格式化版本, 所以字母都是小写，用<b>“-”</b>代替空格。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">loadedSongName</span> - 歌曲在Freeplay/Story Menu的名字。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">loadedSongPath</span> - <b>loadedSongName</b>的格式化版本, 所以字母都是小写，用<b>“-”</b>代替空格。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0]</b></font> </b></p>
			<hr>

			<br>
			<li class="variableitem"><span class="methodexample">bpm</span> - 歌曲的BPM。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">songLength</span> - 歌曲时长（以毫秒为单位）。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">startedCountdown</span> - 如果倒计时已经开始，他就为false。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">seenCutscene</span> - 在歌曲中第一次尝试时为 False，当您重新启动歌曲或被拒绝时设置为 True，用于检测过场动画是否已经看过。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">inGameOver</span> - 用于确认你是否已经死亡。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<h3>铺子变量</h3>
			<li class="variableitem"><span class="methodexample">chartPath</span>  - 铺子的目录，包括文件扩展名。</li>
			<p class="methodbox">版本: <b><font color="red"><b>[1.0.0]</b></font></b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">curStage</span> - 铺子编辑器中显示的歌曲背景名称。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">scrollSpeed</span> - 起始的箭头滚动速度。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">hasVocals</span> - 歌曲是否启用人声。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<h3>难度变量</h3>
			<li class="variableitem"><span class="methodexample">difficulty</span> - 难度ID。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">difficultyName</span> - 难度名称。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">difficultyPath</span> - 将难度名称转化为小写并以连符开头，普通难度时为空。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">difficultyNameTranslation</span> - 翻译的难度名称。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0]</b></font> </b></p>
			<hr>

			<h3>Story Mode/Week 变量</h3>
			<li class="variableitem"><span class="methodexample">isStoryMode</span> -是否是从story mode开始的歌曲。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">weekRaw</span> - Week的ID.</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">week</span> - 当前Week在<span class="methodexample">weeks/</span>的名称。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<h3>Section Variables</h3>
			<li class="variableitem"><span class="methodexample">curBpm</span> - 当前BPM。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>
			<li class="variableitem"><span class="methodexample">curSection</span> - Section的ID.</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">curBeat</span> -当前的beat ID.</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">curStep</span> - 当前的Step ID.</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">curDecBeat</span> - beat ID，但是这会显示距离下一个beat的时长。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">curDecStep</span> - Step ID，但是这会显示距离下一个Step的时长。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">crochet</span> - Beat 在当前段落中花费的时间（以毫秒为单位）。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">stepCrochet</span> - Step 在当前段落中花费的时间（以毫秒为单位）。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<br>
			<li class="variableitem"><span class="methodexample">mustHitSection</span> - 当前部分是否针对玩家的。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">altAnim</span> - 当前部分启用了 Alt Animation。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">gfSection</span> - 当前部分是否针对gf的。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<h3>Score Variables</h3>
			<li class="variableitem"><span class="methodexample">score</span> - 当前分数。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">misses</span> - 当前错过的箭头数。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">hits</span> - 当前已经击打的箭头数。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">combo</span> - 当前的连击数。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">deaths</span> - 到目前为止你死了多少次。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0]</b></font> </b></p>
			<hr>
			<br>
			<li class="variableitem"><span class="methodexample">rating</span> - 准确率，从0~1。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">ratingName</span> - "?", "Sick!", "Good", 等其他的。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">ratingFC</span> - 可能是: "Clear", "SDBC", "FC", "GFC", "SFC".</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">totalPlayed</span> - 错过的 + 已经打击的, 用于计算准确率。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">totalNotesHit</span> - 用于评分计算的命中率的累积分数，"Sick" = +1, "Good" = +0.67, "Bad" = +0.34, "Shit" = 0.</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0]</b></font> </b></p>
			<hr>

			<h3>Gameplay 变量修饰符</h3>
			<li class="variableitem"><span class="methodexample">playbackRate</span> - 默认为 1</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">healthGainMult</span> -  默认为 1</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">healthLossMult</span> -  默认为 1</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">instakillOnMiss</span> -  默认为关闭</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">practice</span> - 默认为关闭</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<li class="variableitem"><span class="methodexample">botPlay</span> - 默认为关闭</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>

			<h3>箭头变量</h3>
			<li class="variableitem"><span class="methodexample">defaultPlayerStrumX0</span> - 玩家的左箭头 X: 732</li>
			<li class="variableitem"><span class="methodexample">defaultPlayerStrumY0</span> - 玩家的左箭头 Y: 50 (Upscroll模式) - 570 (Downscroll模式) </li>
			<li class="variableitem"><span class="methodexample">defaultPlayerStrumX1</span> - 玩家的下箭头 X: 844</li>
			<li class="variableitem"><span class="methodexample">defaultPlayerStrumY1</span> - 玩家的下箭头 Y: 50 (Upscroll模式) - 570 (Downscroll模式) </li>
			<li class="variableitem"><span class="methodexample">defaultPlayerStrumX2</span> - 玩家的上箭头 X: 956</li>
			<li class="variableitem"><span class="methodexample">defaultPlayerStrumY2</span> - 玩家的上箭头 Y: 50 (Upscroll模式) - 570 (Downscroll模式) </li>
			<li class="variableitem"><span class="methodexample">defaultPlayerStrumX3</span> - 玩家的右箭头 X: 1068</li>
			<li class="variableitem"><span class="methodexample">defaultPlayerStrumY3</span> - 玩家的右箭头 Y: 50 (Upscroll模式) - 570 (Downscroll模式) </li>
			<li class="variableitem"><span class="methodexample">defaultOpponentStrumX0</span> - 对手的左箭头 X: 92</li>
			<li class="variableitem"><span class="methodexample">defaultOpponentStrumY0</span> - 对手的左箭头 Y: 50 (Upscroll模式) - 570 (Downscroll模式) </li>
			<li class="variableitem"><span class="methodexample">defaultOpponentStrumX1</span> - 对手的下箭头 X: 204</li>
			<li class="variableitem"><span class="methodexample">defaultOpponentStrumY1</span> - 对手的下箭头 Y: 50 (Upscroll模式) - 570 (Downscroll模式) </li>
			<li class="variableitem"><span class="methodexample">defaultOpponentStrumX2</span> - 对手的上箭头 X: 316</li>
			<li class="variableitem"><span class="methodexample">defaultOpponentStrumY2</span> - 对手的下箭头 Y: 50 (Upscroll模式) - 570 (Downscroll模式) </li>
			<li class="variableitem"><span class="methodexample">defaultOpponentStrumX3</span> - 对手的右箭头 X: 428</li>
			<li class="variableitem"><span class="methodexample">defaultOpponentStrumY3</span> - 对手的右箭头 Y: 50 (Upscroll模式) - 570 (Downscroll模式) </li>
			<p style="color: gray">注意：所有 Strum 变量仅在调用 “onCountdownStarted” 后可用，否则其值为 0。</p>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>
			<h3>角色变量</h3>
			<li class="variableitem"><span class="methodexample">defaultBoyfriendX</span> - 玩家的X，他在背景的 .JSON</li>
			<li class="variableitem"><span class="methodexample">defaultBoyfriendY</span> - 玩家的Y，他在背景的 .JSON</li>
			<li class="variableitem"><span class="methodexample">defaultOpponentX</span> - 对手的X，他在背景的 .JSON</li>
			<li class="variableitem"><span class="methodexample">defaultOpponentY</span> - 对手的Y，他在背景的 .JSON</li>
			<li class="variableitem"><span class="methodexample">defaultGirlfriendX</span> - Girlfriend的X, 他在背景的 .JSON</li>
			<li class="variableitem"><span class="methodexample">defaultGirlfriendY</span> - Girlfriend的Y, 他在背景的 .JSON</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>
			<br>
			<li class="variableitem"><span class="methodexample">boyfriendName</span> - 当前玩家角色的 .JSON 名称（不带扩展名）。</li>
			<li class="variableitem"><span class="methodexample">dadName</span> - 当前对手角色的 .JSON 名称（不带扩展名）。</li>
			<li class="variableitem"><span class="methodexample">gfName</span> - 当前Girlfriend角色的 .JSON 名称（不带扩展名）。</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>
			<h3>设置变量</h3>
			<li class="variableitem"><span class="methodexample">downscroll</span> - 默认为false</li>
			<li class="variableitem"><span class="methodexample">middlescroll</span> - 默认为false</li>
			<li class="variableitem"><span class="methodexample">framerate</span> - 默认为60</li>
			<li class="variableitem"><span class="methodexample">ghostTapping</span> - 默认为true</li>
			<li class="variableitem"><span class="methodexample">hideHud</span> - 默认为false</li>
			<li class="variableitem"><span class="methodexample">timeBarType</span> - 默认为"Time Left"</li>
			<li class="variableitem"><span class="methodexample">scoreZoom</span> - 默认为true</li>
			<li class="variableitem"><span class="methodexample">cameraZoomOnBeat</span> - 默认为true</li>
			<li class="variableitem"><span class="methodexample">flashingLights</span> - 默认为true</li>
			<li class="variableitem"><span class="methodexample">noteOffset</span> - 默认为0</li>
			<li class="variableitem"><span class="methodexample">healthBarAlpha</span> - 默认为1.0</li>
			<li class="variableitem"><span class="methodexample">noResetButton</span> - 默认为false</li>
			<li class="variableitem"><span class="methodexample">lowQuality</span> - 默认为false</li>
			<li class="variableitem"><span class="methodexample">shadersEnabled</span> - 默认为true</li>
			<li class="variableitem"><span class="methodexample">guitarHeroSustains</span> - 默认为true</li>
			<li class="variableitem"><span class="methodexample">noteSkin</span> - 默认为"Default"</li>
			<li class="variableitem"><span class="methodexample">splashSkin</span> - 默认为"Psych"</li>
			<li class="variableitem"><span class="methodexample">splashAlpha</span> - 默认为0.6</li>
			<br>
			<li class="variableitem"><span class="methodexample">noteSkinPostfix</span> - 箭头皮肤(比如: "-future", "-chip", 默认为空).</li>
			<li class="variableitem"><span class="methodexample">splashSkinPostfix</span> - 飞溅皮肤(比如: "-diamond", "-vanilla", Psych 为空).</li>
			<p class="methodbox">版本: <b> <font color="red"><b>[1.0.0],[0.7.3]</b></font> </b></p>
			<hr>
	</body>
</html>